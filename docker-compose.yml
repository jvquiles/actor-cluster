version: "3.7"
services:
    redis:
        image: redis:6.2.5
        ports:
            - 6379:6379
        networks:
            - back
    api:
        build:
            context: .
            dockerfile: Cluster.API/dockerfile
        ports:
            - 5000:80
        networks:
            - back
    remote:
        build:
            context: .
            dockerfile: Cluster.Remote/dockerfile
        ports:        
            - 5001:5001
        networks: 
            - back
networks:
    back:
        driver: bridge